extends ../layout

block content 
  h1= title 
  p= game
  form(action="", method="post") 
    label(for="name") Video Game (required) : 
      input#name(type="text", name="name", required, minlength=1, value=(game ? game.name : ""))
    label(for="description") Description (required) : 
      textarea#description(name="description", cols="30", rows="10", required, minlength=1)= game ? game.description : ""
    label(for="releaseDate") Release Date (required) : 
      input#releaseDate(type="date", name="releaseDate", required, value=(game ? game.releaseDate : "")) 

    label(for="price") Price (optional) :
      input#price(type="number", name="price", min=0, step=0.01, value=(game ? game.price : ""))

    label(for="copies") Copies in Stock (optional) :
      input#copies(type="number", name="copies", min=0, value=(game ? game.copies : "")) 

    label(for="developer") Developed by (required) :
      select#developer(name="developer", required)
        option(value="") List of Developers 
        for developer in developerList 
          option(value=developer._id,
            selected=(
              game
                ? (game.developer.toString() === developer._id.toString()
                  ? true
                  : false)
                : false) || (
              query
                ? (query.developer.toString() === developer._id.toString()
                  ? true
                  : false)
              : false)
            )= developer.name
    fieldset 
      legend Available on the Following Consoles (optional) :
      for console in consoleList 
        label(for=console.name)= console.name 
        input(id=console.name, type="checkbox", name="console", value=console._id, checked=( game ? (game.console.includes(console._id) ? true : false) : false))

    fieldset 
      legend This Game is a(n) (optional) :
      for genre in genreList 
        label(for=genre.name)= genre.name 
        input(id=genre.name, type="checkbox", name="genre", value=genre._id, checked=( game ? (game.genre.includes(genre._id) ? true : false) : false))

    input(type="submit", value="Add game")

  if (errors)
    for error in errors 
      p= error.msg